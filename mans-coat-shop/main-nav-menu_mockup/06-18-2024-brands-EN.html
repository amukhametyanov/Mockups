<style>
    /* temp solution */
.has-sub-menu.menu-nav > a[href*="/Brands-Show"] + div.level-2.is-vertical > .level-2__row > :nth-child(1) {
    display: none;
}
/* temp solution */
.link-with-blue-tag:hover {
    text-decoration: none !important;
}
.link-with-blue-tag:hover > span {
    text-decoration: underline;
}
.nav-blue-tag {
    background-color: #007ac3;
    padding: 2px 4px;
    color: #ffffff;
    font-size: 9px;
    border-radius: 2px;
    margin-left: 5px;
    letter-spacing: 1px;
    text-transform: uppercase;
    text-decoration: none !important;
    
}
.has-sub-menu a,
.has-sub-menu a:hover {
    color: #000 !important;
}
.has-sub-menu a:not(.nav-cat-link),
.has-sub-menu a:not(.nav-cat-link):hover {
    font-weight: 500 !important;
}
.flyout-title {
    font-size: 14px;
    font-weight: 700;
    color: #000;
    letter-spacing: 0;
}
.flyout-subtitle {
    font-size: 14px;
    font-weight: 500;
    letter-spacing: 0;
}
.submenu-nav {
    margin-left: 10px;
    border-left: 1px solid #ccc;
    padding-left: 10px;
}
.submenu-nav a {
    margin-left: 10px;
}

.nav-menu-option-expanded-on-mobile ul {
    max-height: max-content !important;
}

.has-sub-menu img[alt="Angle Right"] {
    width: 8.2px !important;
}


@media (min-width: 1024px) {
    .nav-cat-link {
        font-size: 14px !important;
        font-weight: 700 !important;
        color: #000 !important;
        letter-spacing: 0;
    }
    
    .nav-cat-link:hover {
        text-decoration: none !important;
    }
    .nav-cat-link:hover > span {
        text-decoration: underline;
    }
    
    .nav-shop-all-link {
        text-decoration: underline !important;
        font-weight: 700 !important;
    }
    .has-sub-menu.wide-menu-column {
        padding: 0 20px;
        flex: 1 !important;
        max-width: inherit !important;
    }
}


/* flyout tiles related */
.bg-women-coat-shop {
        background-image: linear-gradient(
            rgba(0, 0, 0, 0.0),
            rgba(0, 0, 0, 0.4)
        ),
        url(https://cdn.media.amplience.net/i/sportinglife/ss24-cloudmonster_hyper-display-gdn-1200x1200-01?fmt=auto);  
        background-repeat: no-repeat;
        background-size: cover;
        background-position: top center;
        min-height: 250px;
    }
    .bg-sneaker-shop {
        background-image: linear-gradient(
            rgba(0, 0, 0, 0.0),
            rgba(0, 0, 0, 0.4)
        ),
        url(https://cdn.media.amplience.net/i/sportinglife/NB_Brands_Flyout_Tile_2?fmt=auto); 
        background-repeat: no-repeat;
        background-size: cover;
        background-position: bottom center;
        min-height: 250px;
    }
  
    #navigation .has-sub-menu.menu-nav ul .flyout-tile-nav .brand-page-layout-btn-white {
        padding: 12px 20px;
        min-width: 130px;
        max-width: 120px;
        font-size: 12px !important;
        font-weight: 600;
        color: #000;
        background: #fff;
        text-align: center;
        text-decoration: none;
        display: flex;
        justify-content: center;
        align-items: center;
        text-transform: uppercase !important;
        letter-spacing: 0.3px;
        border: 1px solid #fff;
        margin: 5px 10px;
        line-height: 1;
        z-index: 3;
    }
    #navigation .has-sub-menu.menu-nav ul .flyout-tile-nav .brand-page-layout-btn-white:hover {
        background: transparent;
        border: 1px solid #fff;
        color: #fff !important;
        text-decoration: none !important;
        transition: 0.5s !important;
    }
  
    .flyout-tile-nav {
        padding-left: 15px;
        padding-right: 15px;
    }
    .flyout-tile-nav {
            flex-basis: 50%;
        }
    .details-txt {
        position: absolute;
        width: 100%;
        height: 100%;
    }
    .menu-tile-title {
        font-size: 14px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 2px;
        padding-right: 5px;
        padding-left: 5px;
        line-height: 1.4;
        color: #fff;
    }
         
  
   
  
    @media (max-width: 1023px) {
        .flyout-tile-nav {
            padding: 0;
        }
        .flyout-tile-nav {
            flex-basis: 100%;
            margin-top: 15px;
        }
    }
  
</style>
<ul>
    <li class="has-sub-menu"><a class="nav-cat-link" href="#0"><img class="d-lg-none active-cat-menu-nav" src="https://www.sportinglife.ca/on/demandware.static/-/Library-Sites-SportingLifeSharedLibrary/default/images/fontawesome-svgs/light-angle-left.svg" alt="Angle Left" width="12"><span>Top Brands</span> <img class="expand-nav-menu" src="https://www.sportinglife.ca/on/demandware.static/-/Library-Sites-SportingLifeSharedLibrary/default/images/fontawesome-svgs/light-angle-right.svg" alt="Angle Right" width="8.2"></a>
        <ul class="level-3">
            <li><a href="$url('Search-Show','cgid','men-clothing-coats-jackets-raincoats')$">Arc'teryx</a></li>
            <li><a href="$url('Search-Show','cgid','men-lifestyles-athletic','prefn1', 'brand', 'prefv1', 'Nike')$">Patagonia</a></li>
            <li><a href="$url('Search-Show','cgid','men-clothing-tops-polos')$">The North Face</a></li>
            <li><a href="$url('Search-Show', 'prefn1', 'brand', 'prefv1', 'BIRDZ')$">Nike</a></li>
            <li><a href="$url('Search-Show','cgid','men-clothing-coats-jackets','prefn1', 'brand', 'prefv1', 'Arc'teryx')$">Stanley</a></li>
            <li><a href="$url('Search-Show','cgid','men-clothing-coats-jackets','prefn1', 'brand', 'prefv1', 'Arc'teryx')$">On</a></li>
            <li><a href="$url('Search-Show','cgid','men-clothing-coats-jackets','prefn1', 'brand', 'prefv1', 'Arc'teryx')$">Salomon</a></li>
            <li><a href="$url('Search-Show','cgid','men-clothing-coats-jackets','prefn1', 'brand', 'prefv1', 'Arc'teryx')$">HOKA</a></li>
            <li><a href="$url('Search-Show','cgid','men-clothing-coats-jackets','prefn1', 'brand', 'prefv1', 'Arc'teryx')$">New Balance</a></li>
            <li><a href="$url('Search-Show','cgid','men-clothing-coats-jackets','prefn1', 'brand', 'prefv1', 'Arc'teryx')$">Birkenstock</a></li>
            <li><a href="$url('Search-Show','cgid','men-clothing-coats-jackets','prefn1', 'brand', 'prefv1', 'Arc'teryx')$">Cannondale</a></li>
            
            
        </ul>
    </li>
    
    
    
        <li class="has-sub-menu"><a class="nav-cat-link" href="#0"><img class="d-lg-none active-cat-menu-nav" src="https://www.sportinglife.ca/on/demandware.static/-/Library-Sites-SportingLifeSharedLibrary/default/images/fontawesome-svgs/light-angle-left.svg" alt="Angle Left" width="12"><span>New Brands</span> <img class="expand-nav-menu" src="https://www.sportinglife.ca/on/demandware.static/-/Library-Sites-SportingLifeSharedLibrary/default/images/fontawesome-svgs/light-angle-right.svg" alt="Angle Right" width="8.2"></a>
            <ul class="level-3">
                <li><a href="$url('Search-Show','cgid','kids-girls','prefn1','ageGroup','prefv1','Big Kid (Size 8-20)')$">Knix</a></li>
                <li><a href="$url('Search-Show','cgid','men-clothing-vests')$">RAINS</a></li>
                <li><a href="$url('Search-Show','cgid','men-clothing-hoodies-sweats')$">Alder</a></li>
                <!-- <li><a class="link-with-blue-tag" href="#0"><span>Pickleball Paddles</span> <span class="nav-blue-tag">New</span></a></li> -->
                <li><a href="$url('Search-Show','cgid','men-clothing-sweaters')$">Allbirds</a></li>
                <li><a href="$url('Search-Show','cgid','men-clothing-tops')$">Diesel Kids</a></li>
                <li><a href="$url('Search-Show','cgid','men-clothing-pants')$">Brunette The Label</a></li>
                <li><a href="$url('Search-Show','cgid','men-clothing-shorts')$">Headster Kids</a></li>
                
                <li><a href="$url('Search-Show','cgid','men-clothing-denim')$">Dickies</a></li>
                <!-- <li><a class="nav-shop-all-link" href="#0">Shop All</a></li> -->
            </ul>
        </li>
    
    
    
    <li class="has-sub-menu"><a class="nav-cat-link" href="#0"><img class="d-lg-none active-cat-menu-nav" src="https://www.sportinglife.ca/on/demandware.static/-/Library-Sites-SportingLifeSharedLibrary/default/images/fontawesome-svgs/light-angle-left.svg" alt="Angle Left" width="12"><span>Brands We Love</span> <img class="expand-nav-menu" src="https://www.sportinglife.ca/on/demandware.static/-/Library-Sites-SportingLifeSharedLibrary/default/images/fontawesome-svgs/light-angle-right.svg" alt="Angle Right" width="8.2"></a>
        <ul class="level-3">
            <li><a href="$url('Search-Show','cgid','men-clothing-coats-jackets')$">Vuori</a></li>
            <li><a href="$url('Search-Show','cgid','men-clothing-vests')$">Lacoste</a></li>
            <li><a href="$url('Search-Show','cgid','men-clothing-hoodies-sweats')$">adidas Originals</a></li>
            <li><a href="$url('Search-Show','cgid','men-clothing-sweaters')$">Polo Ralph Lauren</a></li>
            <li><a href="$url('Search-Show','cgid','men-clothing-tops')$">Veja</a></li>
            <li><a href="$url('Search-Show','cgid','men-clothing-pants')$">MPG</a></li>
            <li><a href="$url('Search-Show','cgid','men-clothing-shorts')$">Asics</a></li>
            
            <li><a href="$url('Search-Show','cgid','men-clothing-denim')$">Psycho Bunny</a></li>
            
            <li><a class="nav-cat-link mt-3" href="$url('Search-Show','cgid','men-new-arrivals')$"><span>Shop All Brands</span> <img class="d-none d-lg-inline" src="https://www.sportinglife.ca/on/demandware.static/-/Library-Sites-SportingLifeSharedLibrary/default/images/fontawesome-svgs/light-angle-right.svg" alt="Angle Right" width="8.2"></a></li>
        </ul>
    </li>
    
    
    
    <li class="has-sub-menu nav-menu-option-expanded-on-mobile wide-menu-column pb-4 pb-lg-0 px-4 px-lg-0">
        
        <div class="d-flex flex-wrap">
  
            <div class="flyout-tile-nav">
                <div class="position-relative bg-women-coat-shop">
                    <div class="details-txt d-flex justify-content-end flex-column">
                
                
                        <p class="menu-tile-title text-center my-2">On</p>
                
    
                        <div class="d-flex justify-content-center flex-wrap" style="margin-bottom: 15px;">
                            <a class="brand-page-layout-btn-white" href="$url('Search-Show', 'prefn1', 'brand', 'prefv1', 'On')$">
                                Shop Now
                            </a>
                        </div>
                    
                    </div>
                </div>
                
            </div>
           
  
            <div class="flyout-tile-nav">
                <div class="position-relative bg-sneaker-shop">
                    <div class="details-txt d-flex justify-content-end flex-column">
                        
                      
                            <p class="menu-tile-title text-center my-2">New Balance</p>
                    
        
                            <div class="d-flex justify-content-center flex-wrap" style="margin-bottom: 15px;">
                                <a class="brand-page-layout-btn-white" href="$url('Search-Show', 'prefn1', 'brand', 'prefv1', 'New Balance')$?cid=brand_flyout_wk15_new_balance">
                                    Shop Now
                                </a>
                            </div>
                        
                        </div>
                </div>
            </div>
            
            
  
        </div>
    
    </li>
    
</ul>

<style>
    
    .active-cat-menu-nav {
        display: none;
        margin-bottom: 2px;
        margin-right: 4px;
    }
    
    @media (max-width: 1023.98px) {
        .hidden {
            display: none !important;
        }
        .has-sub-menu.menu-nav .level-2 .has-sub-menu.is-active {
            margin-top: 15px !important;
        }
        #navigation .has-sub-menu.is-active > a, #navigation .pseudo-has-sub-menu.is-active > a,
        #navigation .has-sub-menu > a, #navigation .pseudo-has-sub-menu > a {
            background-image: none;
        }
        .is-active:not(.menu-nav) > .nav-cat-link {
            font-weight: 600;
            font-size: 17px;
        }
        .is-active > a > .active-cat-menu-nav {
            display: inline;
        }
        .is-active > a > .expand-nav-menu {
            display: none;
        }
    }
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {

function setupMenuHandlers(menuSelector, level) {
  document.querySelectorAll(menuSelector).forEach((item) => {
    item.addEventListener('click', (event) => {
      event.preventDefault();
      const clickedLi = event.target.closest('li');
      const allLis = Array.from(clickedLi.parentElement.children).filter(li => li.tagName.toLowerCase() === 'li');
      let parentLink = null;

      // Select the parent link correctly based on the level
      if (level === 2) {
        const parentUl = clickedLi.closest('ul');
        const parentDiv = parentUl.closest('div.level-2');
        parentLink = parentDiv.previousElementSibling;
      }

      // Check if any sibling other than the clicked one is hidden
      const anyHidden = allLis.some(li => li !== clickedLi && li.classList.contains('hidden'));

      if (anyHidden) {
        // If any sibling is hidden, show all siblings
        allLis.forEach((li) => {
          li.classList.remove('hidden');
        });
        if (level === 2 && parentLink) {
          parentLink.style.display = 'block';
        }
      } else {
        // Hide all siblings and show only the clicked one
        allLis.forEach((li) => {
          if (li !== clickedLi) {
            li.classList.add('hidden');
          }
        });
        if (level === 2 && parentLink) {
          parentLink.style.display = 'none';
        }
      }
    });
  });
}

// Setup handlers for top-level menu items
setupMenuHandlers('.menu-category .menu-nav > a', 1);

// Setup handlers for nested menu items
setupMenuHandlers('.menu-category .level-2 .has-sub-menu > a', 2);
});





</script>